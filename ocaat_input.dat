#####################################################################################
##### OCAAT input parameters file ####
#
#
# This file contains the values of the parameters used by OCAAT.
# Any empty line or lines that begin with a # character will be ignored
# and as many as needed can be added to this file.
#
# * DO NOT modify the ID strings in the first column of each line, these
# are used by the code to identify the parameters in that line.
# * DO NOT write less or more values than those requested in each line
# or the code will halt.
#
# Set values for the parameters below.
#####################################################################################


# Mode used to run the code: a (auto) / s (semi) / m (manual):
# - Automatic mode does not require user intervention of any kind.
# - Semi takes it input values from the 'clusters_input.dat' file.
# - Manual mode will ask for some values (center, radius, background) but
#   will also give you the chance to have them automatically calculated.
MO  s

# Path where the photometric data files of the clusters to be processed are stored.
CP0  /home/gabriel/clusters/clusters_in
# Path where the sub-folders are moved once processed.
CP1  /home/gabriel/clusters/clusters_done
# Output directory.        
CP2  /home/gabriel/clusters/clusters_out/

# Move file once it is processed?
# The cluster's photometric file will be moved to folder
# defined in 'CP1' if this flag is set to 'True'.
MF  False

# Column numbers identifying the data needed, as stored in the clusters'
# photometric data files.
# id_star x_coor y_coor magnitude e_mag color e_col
PD      0      1      2         3     4     5     6
#PD      0      1      2         3     4     6     7

# Input magnitude and color names for the CMD axis. LaTeX
# formatting is allowed.
#       color (x)
XA    "(C-T_{1})"
#    magnitude (y)
YA       "T_{1}"

# Bin widths for the cluster's center determination, in pixels. The
# minimum value will be used to establish the center in auto mode.
#  bin0 bin1 bin2 bin3
CC   25   50   75  100

# Define boundaries for the inner and outer rings where the background
# will be calculated. These rings are defined as a fraction of the the
# maximum range spanned by either axis.
# To input these values in pixels manually, select 'm' mode.
#   Inner Outer
BR     4.    3.

# This parameter determines the number of points that must be found
# within a given delta value around the background value.
# This is the condition where the star density is found to have
# stabilized.
CR  4

# Rejection of stars according to their errors.
# be: bright end, the magnitude value that will be added to the
# brightest star to determine the range where stars will be accepted
# if their errors are lower than 'be_e' (see below).
# be_e: maximum error value that stars in the bright end range can
# have without being rejected.
# e_max: maximum error value a star can have in either its magnitude or
# color without being rejected. 
#   be  be_e  e_max
ER  2.   0.1    0.3

# Cluster region and field regions.
# areas: number of areas defined including the cluster region (integer).
#   areas
GR     5

# Test to determine the probability of the cluster being a physical entity
# instead of a random overdensity of stars, based on comparing its CMD with
# field regions CMDs.
# flag: True / False, switch to apply or skip the test (caps are necessary!).
# runs: auto / manual, the number of times the cluster-field regions will be
# compared. If 'auto' is set, the code will use an integer value of
# 100/(areas-1). If 'manual' is set then 'num' will be used (otherwise this
# number is irrelevant).
#   flag   runs   num
PV  False   auto   1


# Bayesian decontamination algorithm.
# mode: auto / manual / read / skip.
# - If 'auto' is set the code will use the number of runs 'runs' and the number
# of Monte Carlo samples 'mc_samp' as defined internally (ie: 100/(areas-1)
# and 1000 respectively)
# - If 'manual' is set these two values are taken from this file (below),
# otherwise the values are irrelevant.
# - If 'read' is set the code will attempt to read the probabilities from
# an existing file. This file should have the same format as the output
# '*_memb.dat' file created by the code and should be located in the folder
# defined by the ID 'CP0' above.
# - If 'skip' is selected all stars will be assigned an equal probability
# of 1. and the algorithm skipped altogether.
#   mode     runs  mc_samp
DA  read      2      100


# Photometric system & stored isochrones.
# Provide path to stored isochrone files.
#   iso_path (full path to the folder that stores the isochrone files)
PS_p  /media/rest/github/isochrones/iso_wash_marigo

# line_start (string that identifies the beginning of a new isochrone)
# MAR: "#	Isochrone	Z = "
# PAR: "#	Isochrone  Z = "
PS_l   "#	Isochrone	Z = "

# Index that points to the corresponding column in the file.
# WASH: MAR (1 9 7), PAR (2 10 8)
#      mass_ini 1st_mag 2nd_mag <-- color = (2nd_mag-1st_mag)
PS_i         1       9       7

# Ranges and steps for the parameters to be fitted.
# Metallicity     z_min  z_max   z_step
PS_m             0.0005   0.02   0.0005
# Age    age_min age_max  a_step
PS_a         6.6    10.1    0.05
# E(B-V)    e_bv_min e_bv_max e_bv_step
PS_e              0.     0.4      0.01
# Distance modulus    dis_mod_min dis_mod_max dis_mod_step
PS_d                          18.       19.         0.05

# Best fit of synthetic cluster.
run: True / False. Flag that determines if the best isochrone
# fitting process is to be run.
# boot_num: number of times the bootstrap with replacement
# process will run. Minimum value is 2.
#     run  boot_num
BF   True        2

# Synthetic cluster.
# sys_select: WASH / UBVI
# IMF:  chabrier_2001 / kroupa_1993 / kroupa_2002
#    sys_select              IMF   total_mass   frac_binar  mass_ratio
SC         WASH    chabrier_2001         5000          0.5         0.7

# Genetic Algorithm.
# n_pop: number of chromosomes in the population.
# n_gen: number of generations to process.
# fdif: Fitness differential. Establishes the 'selection pressure' for the
# algorithm.
# p_cros: crossover probability.
# (Crossover operator)
# cr_sel: select 1-point (1P) or 2-point (2P) crossover.
# p_mut: mutation probability.
# (Elitism operator)
# n_el: number of best solutions to pass unchanged to the next generation
# n_ei: number of generations allowed to run with the same best solution
# before applying the Extinction/Immigration operator.
# (Exit switch)
# n_es:number of times the Extinction/Immigration operator is allowed to run
# returning the same best solution before exiting the generations loop.
#
#   n_pop  n_gen fdif p_cross cr_sel p_mut n_el n_ei n_es
GA   100     20   1.    0.85     2P  0.01    1   25    6
