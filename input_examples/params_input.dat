###############################################################################
##### OCAAT input parameters file ####
#
# This file contains the values of the parameters used by OCAAT.
# Any empty line or lines that begin with a # character will be ignored and as
# many as needed can be added to this file.
#
# The blocks can be moved around as the user sees fit.
#
# * DO NOT modify the ID strings in the first column of each line, these are
# used by the code to identify the parameters in that line.
# * DO NOT write less or more values than those required in each line or the
# the code will halt.
#
###############################################################################



########################### Input parameters ##################################

# Column numbers identifying the needed data as stored in the clusters'
# photometric data files.
# id_star   x/ra  y/dec magnitude e_mag color e_col
PD      0      1      2         3     4     5     6

# Select a CMD to be used by the code.
# 1: (B-V) vs V   ; UBVI (Johnson)
# 2: (V-I) vs V   ; UBVI (Johnson)
# 3: (C-T1) vs T1 ; Washington
#    selection
CMD          1
###############################################################################



########################## Output parameters ##################################

# Create output figure?
# True / False. If 'False', no output figure will be generated.
# format: png / pdf
#    flag_make_plot  format  DPI
MP             true     png  150

# Move file once it is processed?
# The cluster's photometric file will be moved to the folder defined below if
# this flag is set to 'True'.
# path: Path where the sub-folders are moved once processed if
#  the flag is set to 'True'.
#    flag   path
MF  false  /path/to/folder
###############################################################################



####################### Functions parameters ##################################

# Mode used to run the code.
# mode: auto / semi / manual
# - auto: does not require user intervention of any kind.
# - semi: takes input values from the 'semi_input.dat' file.
# - manual: asks the user for some values (center, radius, background) but
#   will also give you the chance to have them automatically calculated.
#   mode
MO  auto


# Center.
# Bin width for the cluster's center determination.
# mode: auto / manual. If 'auto' is selected the code will use Scott's
# rule to calculate the bandwidth of the KDE used to obtain the
# center value. If 'manual' is set, the 'bandwidth' value will be used
# (otherwise this value is of no importance).
# px/deg: px / deg, indicates if the observed frame is in pixels or degrees.
#    mode    bandwidth  px/deg
CC   auto         0.25


# Radius.
# Number of points that must be found below a minimum delta around the
# background value. This condition indicates that the star density
# has stabilized.
# mode: auto / manual. If 'auto' is selected the 'points' parameter will set
# as 20% of the total number of points in the radial density profile.
#    mode   points
CR   auto        5


# King profile
# flag: true / false, attempt to fit a King profile to the radial density
# profile of the cluster.
#     flag
KP    true


# Errors.
# Rejection of stars according to their errors.
# Modes (available photometric error rejection methods):
# emax: uses the e_max value as a cut in photometric errors.
# lowexp: fits an exponential and rejects any star beyond
# the curve plus N sigmas.
# eyefit: attempt an 'eye' fit process composed of a polynomial
# plus an exponential.
# e_max: maximum error value a star can have in either its magnitude or
# color without being rejected. 
# be: bright end, the magnitude value that will be added to the
# brightest star to determine the range where stars will be accepted
# if their errors are lower than 'be_e' (see below).
# be_e: maximum error value that stars in the bright end range can
# have without being rejected.
# N: number of sigmas (integer) to be used by the 'lowexp' method.
#       mode   e_max   be   be_e  N
ER    emax    0.2    5.   0.07  2


# Field stars regions.
# regions: number of field regions around the cluster that the code will
# attempt to define.
#   regions
GR       5


# KDE p-value test.
# Test to determine the probability of the cluster being a physical entity
# instead of a random over-density of stars, based on comparing its CMD with
# field regions CMDs.
# flag: True / False, switch to apply or skip the test.
# mode: auto / manual. If 'auto' is set, the code will compare 100/(regions-1)
# times the CMDs of the cluster and field regions. If 'manual' is set then
# 'num' will be used, otherwise this number is irrelevant.
#   flag    mode   num
PV  false   manual   2


# Bayesian decontamination algorithm.
# mode: auto / manual / read / skip.
# - If 'auto' is set the code will use the number of runs 'runs'
# as defined internally ie: 1000.
# - If 'manual' is set this value is taken from this file (below),
# otherwise this value is irrelevant.
# - If 'read' is set the code will attempt to read the probabilities from
# an existing file. This file should have the same format as the output
# '*_memb.dat' file created by the code and should be located in the folder
# defined by the ID 'CP0' above.
# - If 'skip' is selected all stars will be assigned an equal probability
# of 1. and the algorithm skipped altogether.
#   mode     runs
DA  skip      100


# Best synthetic cluster fit.
# flag: True / False. Flag that determines if the best synthetic cluster
# fitting process is to be run.
# algorithm: select algorithm to use in best fitting process,
# 'brute' (for Brute Force) / 'genet' (for Genetic Algorithm)
# If 'brute' is selected, 'boot_num' is irrelevant.
# boot_num: number of times the bootstrap with replacement process will run.
# Minimum value is 2.
#     flag  algorithm   boot_num
BF    false     genet          2

# Select set of isochrones to use.
# iso_select: MAR (Marigo) / PAR (PARSEC)
#    iso_select
PS          PAR

# Reduce membership algorithm.
# mode: auto / manual / skip; 'auto' will set the minimum probability value
# such that only the half of stars with the highest probability are used. If
# 'mode' is used the minimum probability value has to be set manually in
# 'min_prob'.
#    mode   min_prob/max_mag
RM    mag                 17

# Ranges and steps for the parameters to be fitted.
# Metallicity     z_min  z_max
PS_m             0.0005   0.03
# log(age/yr)   age_min age_max
PS_a                6.6    10.1
# E(B-V)    e_bv_min e_bv_max e_bv_step
PS_e              0.     1.5      0.05
# Distance modulus    dis_mod_min dis_mod_max dis_mod_step
PS_d                          8.       15.         0.1

# Synthetic cluster parameters.
# IMF:  chabrier_2001 / kroupa_1993 / kroupa_2002
#             IMF   total_mass   frac_binar  mass_ratio
SC  chabrier_2001         5000          0.5         0.7

# Genetic Algorithm parameters.
# n_pop: number of chromosomes in the population.
# n_gen: number of generations to process.
# fdif: Fitness differential. Establishes the 'selection pressure' for the
# algorithm.
# p_cros: crossover probability.
# (Crossover operator)
# cr_sel: select 1-point (1P) or 2-point (2P) crossover.
# p_mut: mutation probability.
# (Elitism operator)
# n_el: number of best solutions to pass unchanged to the next generation
# n_ei: number of generations allowed to run with the same best solution
# before applying the Extinction/Immigration operator.
# (Exit switch)
# n_es:number of times the Extinction/Immigration operator is allowed to run
# returning the same best solution before exiting the generations loop.
#
#   n_pop  n_gen fdif p_cross cr_sel p_mut n_el n_ei n_es
GA    100    100   1.    0.85     2P  0.01    1  100   10
###############################################################################
